---
import { Link } from "@/components/Link";
import RichText from "@/components/RichText.astro";
import type { Hero as HeroProps, Media } from "@/lib/payloadTypes";
import { Separator } from "@/components/Separator/Separator";
import { cn } from "@/utils/ui";
import { Image } from "@unpic/astro";
import AstroImage from "@/components/image/AstroImage.astro";

const { title, richText, links, media } = Astro.props as HeroProps;

const mediaData = media && typeof media === "object" ? (media as Media) : null;
const { alt, url, width, height, mimeType } = mediaData || {};
---

<section
    class="relative h-auto bg-hero px-4 pt-24 min-[430px]:pb-32 md:pb-0 lg:pb-52 dark:bg-[#262626] data-[theme=dark]:background-image-none dark:bg-none bg-cover bg-center"
>
    <div
        class="wrapper relative z-10 m-auto grid grid-cols-1 grid-rows-2 place-items-center gap-y-12 lg:grid lg:grid-cols-[60%_40%] lg:grid-rows-1 lg:gap-y-0 lg:pb-44"
    >
        <div
            class={"flex flex-col items-center gap-24 md:gap-0 " +
                "md:items-start"}
        >
            <svg
                width="90"
                height="89"
                viewBox="0 0 90 89"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                class="absolute top-[-37px] left-[-23px] z-[-2] w-[74px] transition-all duration-300
                       [&>path]:fill-[#FDD172]
                       dark:[&>path]:fill-none
                       dark:[&>path]:stroke-[#FDD172]
                       dark:[&>path]:stroke-[2px] dark:opacity-50"
            >
                <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M18.1798 44.3077L0 33.7799L13.3996 10.5279L31.59 21.0375L31.6003 0H58.3997L58.41 21.0375L76.6003 10.5279L90 33.7799L71.82 44.3077L90 54.8355L76.6003 78.0876L58.41 67.5779L58.3997 88.6154H31.6003L31.59 67.5779L13.3996 78.0876L0 54.8355L18.1798 44.3077Z"
                    fill="#FDD172"></path>
            </svg>
            {
                title && (
                    <h1 class="md:mb-[80px] md:w-2/3 lg:w-4/5 text-heading-color  dark:text-paragraph-color-dark">
                        {title}
                    </h1>
                )
            }
            <div class={"flex grow flex-col justify-end"}>
                {
                    richText && (
                        <RichText
                            className="text-paragraph-color dark:text-paragraph-color-dark"
                            content={richText}
                        />
                    )
                }
                {
                    Array.isArray(links) && links.length > 0 && (
                        <ul class="mt-4 flex gap-4 md:justify-center">
                            {links.map(({ link }, i) => {
                                return (
                                    <li>
                                        <Link {...link} client:only="react" />
                                    </li>
                                );
                            })}
                        </ul>
                    )
                }
            </div>
        </div>
        <div
            class={cn(
                "relative w-[80%] max-w-96",
                "md:absolute bg-contain bg-center bg-svg-light  md:right-0 md:w-full lg:relative lg:self-end  data-[theme=dark]:bg-svg-dark",
            )}
        >
            {
                mediaData && url && (
                    <AstroImage
                        src={url}
                        width={width!}
                        height={height!}
                        alt={alt || ""}
                        className="relative top-[-2px] h-full min-[1070px]:top-[50px] min-[1188px]:top-[10px] lg:top-[0px] !bg-none"
                        mimeType={mimeType!}
                    />
                )
            }
        </div>
    </div>
    {(<Separator type={"separatorWhite"} style={{ bottom: "-80px" }} />)}
</section>
